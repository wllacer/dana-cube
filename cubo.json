{
    "default": {
        "cubo": "experimento", 
        "vista": {
            "elemento": "votes_presential", 
            "agregado": "sum", 
            "col": "2", 
            "row": "3"
        }
    }, 
    "rental": {
        "base filter": "", 
        "table": "sakila.rental", 
        "guides": [
            {
                "prod": [
                    {
                        "fmt": "date", 
                        "elem": "rental_date"
                    }
                ], 
                "type": "Ymd", 
                "name": "rental_date", 
                "class": "d"
            }, 
            {
                "prod": [
                    {
                        "class": "o", 
                        "name": "año", 
                        "elem": "DATE_FORMAT(rental_date,'%Y')"
                    }, 
                    {
                        "case_sql": [
                            "case", 
                            "when DATE_FORMAT($$1,'%m') in ('01','02','03') then concat(DATE_FORMAT($$1,'%Y'),'\\:1')", 
                            "when DATE_FORMAT($$1,'%m') in ('04','05','06') then concat(DATE_FORMAT($$1,'%Y'),'\\:2')", 
                            "when DATE_FORMAT($$1,'%m') in ('07','08','09') then concat(DATE_FORMAT($$1,'%Y'),'\\:3')", 
                            "when DATE_FORMAT($$1,'%m') in ('10','11','12') then concat(DATE_FORMAT($$1,'%Y'),'\\:4')", 
                            "end as $$2"
                        ], 
                        "class": "c", 
                        "name": "trimestre", 
                        "elem": "rental_date"
                    }
                ], 
                "name": "rental_date_trimestre", 
                "class": "h"
            }, 
            {
                "prod": [
                    {
                        "fmt": "date", 
                        "elem": "return_date"
                    }
                ], 
                "type": "Ymd", 
                "name": "return_date", 
                "class": "d"
            }, 
            {
                "prod": [
                    {
                        "class": "o", 
                        "name": "año", 
                        "elem": "DATE_FORMAT(return_date,'%Y')"
                    }, 
                    {
                        "case_sql": [
                            "case", 
                            "when DATE_FORMAT($$1,'%m') in ('01','02','03') then concat(DATE_FORMAT($$1,'%Y'),'\\:1')", 
                            "when DATE_FORMAT($$1,'%m') in ('04','05','06') then concat(DATE_FORMAT($$1,'%Y'),'\\:2')", 
                            "when DATE_FORMAT($$1,'%m') in ('07','08','09') then concat(DATE_FORMAT($$1,'%Y'),'\\:3')", 
                            "when DATE_FORMAT($$1,'%m') in ('10','11','12') then concat(DATE_FORMAT($$1,'%Y'),'\\:4')", 
                            "end as $$2"
                        ], 
                        "class": "c", 
                        "name": "trimestre", 
                        "elem": "return_date"
                    }
                ], 
                "name": "return_date_trimestre", 
                "class": "h"
            }, 
            {
                "prod": [
                    {
                        "fmt": "date", 
                        "elem": "last_update"
                    }
                ], 
                "type": "Ymd", 
                "name": "last_update", 
                "class": "d"
            }, 
            {
                "prod": [
                    {
                        "class": "o", 
                        "name": "año", 
                        "elem": "DATE_FORMAT(last_update,'%Y')"
                    }, 
                    {
                        "case_sql": [
                            "case", 
                            "when DATE_FORMAT($$1,'%m') in ('01','02','03') then concat(DATE_FORMAT($$1,'%Y'),'\\:1')", 
                            "when DATE_FORMAT($$1,'%m') in ('04','05','06') then concat(DATE_FORMAT($$1,'%Y'),'\\:2')", 
                            "when DATE_FORMAT($$1,'%m') in ('07','08','09') then concat(DATE_FORMAT($$1,'%Y'),'\\:3')", 
                            "when DATE_FORMAT($$1,'%m') in ('10','11','12') then concat(DATE_FORMAT($$1,'%Y'),'\\:4')", 
                            "end as $$2"
                        ], 
                        "class": "c", 
                        "name": "trimestre", 
                        "elem": "last_update"
                    }
                ], 
                "name": "last_update_trimestre", 
                "class": "h"
            }, 
            {
                "prod": [
                    {
                        "source": {
                            "filter": "", 
                            "table": "sakila.customer", 
                            "code": "customer_id", 
                            "desc": [
                                "first_name", 
                                "last_name", 
                                "email"
                            ]
                        }, 
                        "elem": "customer_id"
                    }
                ], 
                "name": "fk_rental_customer", 
                "class": "o"
            }, 
            {
                "prod": [
                    {
                        "source": {
                            "filter": "", 
                            "table": "sakila.inventory", 
                            "code": "inventory_id", 
                            "desc": "inventory_id"
                        }, 
                        "elem": "inventory_id"
                    }
                ], 
                "name": "fk_rental_inventory", 
                "class": "o"
            }, 
            {
                "prod": [
                    {
                        "source": {
                            "filter": "", 
                            "table": "sakila.staff", 
                            "code": "staff_id", 
                            "desc": [
                                "first_name", 
                                "last_name", 
                                "email", 
                                "username", 
                                "password"
                            ]
                        }, 
                        "elem": "staff_id"
                    }
                ], 
                "name": "fk_rental_staff", 
                "class": "o"
            }
        ], 
        "connect": {
            "dbuser": null, 
            "dbhost": null, 
            "driver": "mysqldb", 
            "dbname": "mysql+mysqldb://demo:demo123@localhost/mysql", 
            "dbpass": null
        }, 
        "fields": [
            "rental_id", 
            "inventory_id", 
            "customer_id", 
            "staff_id"
        ]
    }, 
    "experimento": {
        "base filter": "", 
        "table": "votos_locales", 
        "connect": {
            "dbuser": null, 
            "dbhost": null, 
            "driver": "QSQLITE", 
            "dbname": "/home/werner/projects/dana-cube.git/ejemplo_dana.db", 
            "dbpass": null
        }, 
        "fields": [
            "votes_presential", 
            "votes_percent", 
            "seats", 
            "ord"
        ], 
        "guides": [
            {
                "prod": [
                    {
                        "source": {
                            "filter": "code in (select distinct partido from votos_provincia where votes_percent >= 3)", 
                            "table": "partidos", 
                            "code": "code", 
                            "desc": "acronym"
                        }, 
                        "elem": "partido"
                    }
                ], 
                "name": "partido", 
                "class": "o"
            }, 
            {
                "prod": [
                    {
                        "source": {
                            "filter": "provincia <> '' and municipio = '' and isla = ''", 
                            "table": "localidades", 
                            "code": "provincia", 
                            "desc": "nombre"
                        }, 
                        "elem": "provincia"
                    }
                ], 
                "name": "provincia", 
                "class": "o"
            }, 
            {
                "prod": [
                    {
                        "fmt": "t", 
                        "enum_fmt": "n", 
                        "elem": "partido", 
                        "categories": [
                            {
                                "default": "otros"
                            }, 
                            {
                                "values": [
                                    "3316", 
                                    "4688"
                                ], 
                                "result": "Derecha", 
                                "condition": "in"
                            }, 
                            {
                                "values": [
                                    "1079", 
                                    "4475"
                                ], 
                                "result": "Centro", 
                                "condition": "in"
                            }, 
                            {
                                "values": [
                                    "3484"
                                ], 
                                "result": "Izquierda", 
                                "condition": "in"
                            }, 
                            {
                                "values": [
                                    "3736", 
                                    "5033", 
                                    "4850", 
                                    "5008", 
                                    "5041", 
                                    "2744", 
                                    "5026"
                                ], 
                                "result": "Extrema Izquierda", 
                                "condition": "in"
                            }, 
                            {
                                "values": [
                                    "5063", 
                                    "4991", 
                                    "1528"
                                ], 
                                "result": "Separatistas", 
                                "condition": "in"
                            }, 
                            {
                                "values": [
                                    "1533", 
                                    "4744", 
                                    "4223"
                                ], 
                                "result": "Nacionalistas", 
                                "condition": "in"
                            }
                        ]
                    }
                ], 
                "name": "ideologia", 
                "class": "c"
            }, 
            {
                "prod": [
                    {
                        "source": {
                            "filter": "provincia = ''", 
                            "table": "localidades", 
                            "code": "region", 
                            "desc": "nombre"
                        }, 
                        "elem": "region", 
                        "name": "region"
                    }, 
                    {
                        "source": {
                            "filter": "provincia <> '' and municipio = '' and isla = ''", 
                            "table": "localidades", 
                            "grouped by": "region", 
                            "code": "provincia", 
                            "desc": "nombre"
                        }, 
                        "elem": "provincia", 
                        "name": "provincia"
                    }
                ], 
                "name": "geo", 
                "class": "h"
            }, 
            {
                "prod": [
                    {
                        "source": {
                            "filter": "provincia <> '' and municipio = '' and isla = ''", 
                            "table": "localidades", 
                            "code": "provincia", 
                            "desc": "nombre"
                        }, 
                        "elem": "substr(municipio,1,2)", 
                        "name": "provincia"
                    }
                ], 
                "name": "provincial", 
                "class": "o"
            }, 
            {
                "prod": [
                    {
                        "source": {
                            "filter": "tipo = 'P'", 
                            "table": "geo", 
                            "code": "codigo", 
                            "desc": "nombre"
                        }, 
                        "name": "localidad", 
                        "related via": [
                            {
                                "filter": "geo_rel.tipo_padre = 'P'", 
                                "table": "geo_rel", 
                                "clause": [
                                    {
                                        "rel_elem": "hijo", 
                                        "base_elem": "votos_locales.municipio"
                                    }
                                ]
                            }
                        ], 
                        "elem": "geo_rel.padre"
                    }
                ], 
                "name": "prov indirecto", 
                "class": "o"
            }, 
            {
                "prod": [
                    {
                        "fmt": "date", 
                        "elem": "fakedate"
                    }
                ], 
                "type": "Ymd", 
                "name": "fecha", 
                "class": "d"
            }, 
            {
                "prod": [
                    {
                        "elem": "strftime('%Y',fakedate)", 
                        "class": "o", 
                        "name": "año"
                    }, 
                    {
                        "case_sql": [
                            "case", 
                            "when strftime('%m',$$1) in ('01','02','03')  then strftime('%Y',$$1)||'\\:1'", 
                            "when strftime('%m',$$1) in ('04','05','06')  then strftime('%Y',$$1)||'\\:2'", 
                            "when strftime('%m',$$1) in ('07','08','09') then strftime('%Y',$$1)||'\\:3'", 
                            "when strftime('%m',$$1) in ('10','11','12') then strftime('%Y',$$1)||'\\:4'", 
                            "end as $$2"
                        ], 
                        "elem": "fakedate", 
                        "class": "c", 
                        "name": "trimestre"
                    }
                ], 
                "name": "cuatrimestre", 
                "class": "h"
            }
        ]
    }
}