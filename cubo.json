{
    "default": {
        "cubo": "experimento", 
        "vista": {
            "row": 1, 
            "agregado": "sum", 
            "col": 0, 
            "elemento": "votes_presential"
        }
    }, 
    "experimento": {
        "base filter": "", 
        "table": "votos_locales", 
        "guides": [
            {
                "prod": [
                    {   "source": {
                            "filter": "code in (select distinct partido from votos_provincia where votes_percent >= 3)", 
                            "table": "partidos", 
                            "code": "code", 
                            "desc": "acronym"
                        }, 

                        "elem": "partido"
                    }
                ], 
                "name": "partido", 
                "class": "o"
            }, 
            {
                "prod": [
                    {
                        "source": {
                            "filter": "provincia <> '' and municipio = '' and isla = ''", 
                            "table": "localidades", 
                            "code": "provincia", 
                            "desc": "nombre"
                        }, 

                        "elem": "provincia"
                    }
                ], 
                "name": "provincia", 
                "class": "o"
            }, 
            {
                "prod": [
                    {

                        "elem": "partido", 
                        "fmt": "t",
                        "enum_fmt": "n",
                        "categories": [
                            {
                                "default": "otros"
                            }, 
                            {
                                "values": [
                                    3316, 
                                    4688
                                ], 
                                "result": "Derecha", 
                                "condition": "in"
                            }, 
                            {
                                "values": [
                                    1079, 
                                    4475
                                ], 
                                "result": "Centro", 
                                "condition": "in"
                            }, 
                            {
                                "values": [
                                    3484
                                ], 
                                "result": "Izquierda", 
                                "condition": "in"
                            }, 
                            {
                                "values": [
                                    3736, 
                                    5033, 
                                    4850, 
                                    5008, 
                                    5041, 
                                    2744, 
                                    5026
                                ], 
                                "result": "Extrema Izquierda", 
                                "condition": "in"
                            }, 
                            {
                                "values": [
                                    5063, 
                                    4991, 
                                    1528
                                ], 
                                "result": "Separatistas", 
                                "condition": "in"
                            }, 
                            {
                                "values": [
                                    1533, 
                                    4744, 
                                    4223
                                ], 
                                "result": "Nacionalistas", 
                                "condition": "in"
                            }
                        ]
                    }
                ], 
                "name": "ideologia", 
                "class": "c"
            }, 
            {
                "prod": [
                    {
                        "source": {
                            "filter": "provincia = ''", 
                            "table": "localidades", 
                            "code": "region", 
                            "desc": "nombre"
                        }, 

                        "elem": "region", 
                        "name": "region"
                    }, 
                    {
                        "source": {
                            "filter": "provincia <> '' and municipio = '' and isla = ''", 
                            "table": "localidades", 
                            "desc": "nombre", 
                            "code": "provincia", 
                            "grouped by": "region"
                        }, 

                        "elem": "provincia", 
                        "name": "provincia"
                    }
                ], 
                "name": "geo", 
                "class": "h"
            }, 
            {
                "prod": [
                    {
                        "source": {
                            "filter": "provincia <> '' and municipio = '' and isla = ''", 
                            "table": "localidades", 
                            "code": "provincia", 
                            "desc": "nombre"
                        }, 

                        "elem": "substr(municipio,1,2)",
                        "name": "provincia"
                        
                    }
                ], 
                "name": "provincial", 
                "class": "o"
            },
            {
                "prod": [
                        {
                        "source": {
                            "filter": "tipo = 'P'", 
                            "table": "geo", 
                            "code": "codigo", 
                            "desc": "nombre"
                        },
                        "related via":[{
                            "table": "geo_rel",
                            "clause": [
                                {
                                    "rel_elem":"hijo",
                                    "base_elem":"votos_locales.municipio"
                                }
                                ],
                            "filter": "geo_rel.tipo_padre = 'P'"
                        }
                        ],
                        "name": "localidad",
                        "elem": "geo_rel.padre"
                    }
                ], 
                "name": "prov indirecto", 
                "class": "o"
            },
            {
                "prod": [
                    {
                        "fmt": "date", 
                        "elem": "fakedate"
                    }
                ], 
                "name": "fecha", 
                "class": "d",
                "type":"Ymd"
            }, 
            {
                "name": "cuatrimestre",
                "class":"h",
                "prod": [
                    {
                        "elem": "strftime('%Y',fakedate)",
                        "name": "a√±o",
                        "class":"o"
                    },
                    {
                        "elem": "fakedate",
                        "case_sql":["case",
                            "when strftime('%m',$$1) in ('01','02','03')  then strftime('%Y',$$1)||'\\:1'",
                            "when strftime('%m',$$1) in ('04','05','06')  then strftime('%Y',$$1)||'\\:2'" ,
                            "when strftime('%m',$$1) in ('07','08','09') then strftime('%Y',$$1)||'\\:3'" ,
                            "when strftime('%m',$$1) in ('10','11','12') then strftime('%Y',$$1)||'\\:4'",
                            "end as $$2"],
                        "name": "trimestre",
                        "class":"c"
                    }
                    ]
            }
                    
        ], 
        "connect": {
            "dbuser": null, 
            "dbhost": null, 
            "driver": "sqlite", 
            "dbname": "/home/werner/projects/dana-cube.git/ejemplo_dana.db", 
            "dbpass": null
        }, 
        "fields": [
            "votes_presential", 
            "votes_percent", 
            "seats", 
            "ord"
        ]
    }
}
